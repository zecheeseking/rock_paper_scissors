<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Rock Paper Scissors</title>
    <link rel="stylesheet" type="text/css" href="style.css"/>
  </head>
  <body>
    <div class="align" id="container">
      <input class="font" data-key="0" type="submit" value="rock"></input>
      <input class="font" data-key="1" type="submit" value="paper"></input>
      <input class="font" data-key="2" type="submit" value="scissors"></input>
    </div>
    <div class="align font"><p id="answers"></p></div>
  </body>
  <script>
    var turnChoices = ["rock", "paper", "scissors"]
    let playerScore = 0;
    let computerScore = 0;

    displayAnswer(playerScore, computerScore);

    var buttons = document.querySelectorAll(`input[type="submit"]`);
    buttons.forEach(btn =>
      {
        btn.addEventListener("click", function(e)
        {
          let choiceIndex =btn.getAttribute("data-key");
          playRound(turnChoices[choiceIndex], computerTurn());
        });
      });

    //game
    function playRound(playerSelection, computerSelection){
      if(playerSelection === computerSelection)
        return "It's a draw!"

      switch(playerSelection){
        case turnChoices[0]:
          return computerSelection === turnChoices[1] ? displayAnswer(playerScore, computerScore++) : displayAnswer(playerScore++, computerScore)
        break;
        case turnChoices[1]:
          return computerSelection === turnChoices[2] ? displayAnswer(playerScore, computerScore++) : displayAnswer(playerScore++, computerScore)
        break;
        case turnChoices[2]:
          return computerSelection === turnChoices[0] ? displayAnswer(playerScore, computerScore++) : displayAnswer(playerScore++, computerScore)
        break;
        default:
          return "Error: could not find outcome. Please re-enter selection."
      }
    }

    function displayAnswer(player, computer)
    {
      if(player === 5 || computer === 5)
        answers.textContent = (player === 5) ? "You win! Click button to restart.": "You lose! Click button to restart.";
      else
      {
        var answers = document.querySelector("p#answers");
        answers.textContent = "Player: " + player + ", CPU: " + computer;
      }
    }

    function computerTurn(){
      return turnChoices[randomIndex()]
    }

    function randomIndex(){
      return (Math.floor(Math.random() * 3))
    }
  </script>
</html>
